"use strict";function ContributorsService(t){var e={show:!1,ingroup:!1,stick:!1};return t.get("finder/resources/config/contributors.json").then(function(t){e.orgs=t.data}),{getState:function(){return e},getCcLicence:function(t){var n=e.orgs.find(function(e){return e.name===t});return n&&n.ccLicence?n.ccLicence:4}}}function HelpCtrl(t,e){var n=this;t.info("HelpCtrl"),e.getFaqs().then(function(t){n.faqs=t})}function HelpService(t){var e="finder/resources/config/faqs.json";return{getFaqs:function(){return t.get(e,{cache:!0}).then(function(t){return t.data})}}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AboutService(t){var e={show:!1,ingroup:!1,stick:!1};return t.getConfig("about").then(function(t){e.items=t}),{getState:function(){return e}}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SolrService(t,e,n,r){var a={};return r.getConfig("solr").then(function(e){a.config=e,a.solr=new Solr(e,t)}),a.records=function(t,e){return this.solr.records(t,e)},a.tree=function(t,e){return this.solr.tree(t,e)},a.facets=function(t){return this.solr.facets(t)},a.arrayToMap=function(t){return this.solr.arrayToMap(t)},a}function getBounds(t,e){var n=void 0,r=void 0,a=void 0,i=void 0,o=void 0;return e?(r=Math.max(t.getWest(),-180,e.getWest()),a=Math.min(t.getEast(),180,e.getEast()),i=Math.min(t.getNorth(),90,e.getNorth()),o=Math.max(t.getSouth(),-90,e.getSouth()),n="location:["+(o>i?i:o)+","+(r>a?a:r)+" TO "+i+","+a+"]"):(o=Math.max(t.getSouth(),-90),r=Math.max(t.getWest(),-180),i=Math.min(t.getNorth(),90),a=Math.min(t.getEast(),180)),"{!field f=bbox score=overlapRatio}Intersects(ENVELOPE("+r+","+a+","+i+","+o+"))"}angular.module("finder.authorities",[]).directive("finderAuthorities",["groupsService","searchService",function(t,e){return{restrict:"EA",templateUrl:"authorities/authorities.html",link:function(n){t.getAuthorities().then(function(t){return n.authorities=t}),n.change=function(t){e.filtered()}}}}]),angular.module("finder.autoscroll",[]).directive("autoScroll",["$timeout","$rootScope",function(t,e){return{scope:{trigger:"@",y:"@",height:"@"},link:function(n,r,a){var i=void 0,o=void 0,s=void 0;s=n.height?+n.height:100,o=s,r.on("scroll",function(l){var c=r.scrollTop(),u=r.find(a.autoScroll),d=u.height(),p=r.height(),f=void 0,h=void 0;p>=d||(f=d-c-p,h=o<f,o=f,f<s&&!h&&(i&&t.cancel(i),i=t(function(){e.$broadcast(n.trigger)},30)))})}}}]);var versions={3:{version:"3.0",link:"https://creativecommons.org/licenses/by/3.0/au/"},4:{version:"4.0",link:"https://creativecommons.org/licenses/by/4.0/"}};angular.module("finder.cc",["finder.contributors"]).directive("finderCc",["contributorsService",function(t){return{templateUrl:"cc/cc.html",scope:{orgName:"=?"},link:function(e){var n=t.getCcLicence(e.orgName);e.details=versions[n],e.template="cc/cctemplate.html"}}}]),angular.module("finder.contributors",[]).directive("finderContributors",["$interval","contributorsService",function(t,e){return{templateUrl:"contributors/contributors.html",scope:{},link:function(n,r){var a=void 0;n.contributors=e.getState(),n.over=function(){t.cancel(a),n.contributors.ingroup=!0},n.out=function(){a=t(function(){n.contributors.ingroup=!1},1e3)},n.unstick=function(){n.contributors.ingroup=n.contributors.show=n.contributors.stick=!1,r.find("a").blur()}}}}]).directive("finderContributorsLink",["$interval","contributorsService",function(t,e){return{restrict:"AE",templateUrl:"contributors/show.html",scope:{},link:function(n){var r=void 0;n.contributors=e.getState(),n.over=function(){t.cancel(r),n.contributors.show=!0},n.toggleStick=function(){n.contributors.stick=!n.contributors.stick,n.contributors.stick||(n.contributors.show=n.contributors.ingroup=!1)},n.out=function(){r=t(function(){n.contributors.show=!1},700)}}}}]).factory("contributorsService",ContributorsService).filter("activeContributors",function(){return function(t){return t?t.filter(function(t){return t.enabled}):[]}}),ContributorsService.$inject=["$http"],angular.module("finder.header",[]).controller("headerController",["$scope","$q","$timeout",function(t,e,n){var r=function(t){return t};t.$on("headerUpdated",function(e,n){t.headerConfig=r(n)})}]).directive("finderHeader",[function(){var t={current:"none",heading:"ICSM",headingtitle:"ICSM",helpurl:"help.html",helptitle:"Get help about ICSM",helpalttext:"Get help about ICSM",skiptocontenttitle:"Skip to content",skiptocontent:"Skip to content",quicklinksurl:"/search/api/quickLinks/json?lang=en-US"};return{transclude:!0,restrict:"EA",templateUrl:"header/header.html",scope:{current:"=",breadcrumbs:"=",heading:"=",headingtitle:"=",helpurl:"=",helptitle:"=",helpalttext:"=",skiptocontenttitle:"=",skiptocontent:"=",quicklinksurl:"="},link:function(e,n,r){angular.copy(t);angular.forEach(t,function(t,n){n in e||(e[n]=t)})}}}]),angular.module("finder.tree",[]).directive("finderTree",["groupsService","searchService",function(t,e){return{templateUrl:"filters/tree.html",restrict:"AE",link:function(n){t.getGroups().then(function(t){return n.groups=t}),n.change=function(t){e.filtered(),t.selected&&(t.expanded=!0)}}}}]).filter("withTotals",function(){return function(t){if(t)return t.filter(function(t){return t.total})}}),angular.module("finder.help",[]).directive("finderHelp",[function(){return{templateUrl:"help/help.html"}}]).directive("finderFaqs",[function(){return{restrict:"AE",templateUrl:"help/faqs.html",scope:{faqs:"="},link:function(t){t.focus=function(t){$("#faqs_"+t).focus()}}}}]).controller("HelpCtrl",HelpCtrl).factory("helpService",HelpService),HelpCtrl.$inject=["$log","helpService"],HelpService.$inject=["$http"],angular.module("finder.lock",[]).directive("finderLock",[function(){return{scope:{hover:"="},template:'<i class="fa fa-lock" aria-hidden="true" title="The features shown on the map are locked to the current search results. Clear your search results to show more features"></i>'}}]),angular.module("finder.altthemes",["finder.storage"]).directive("altThemes",["altthemesService",function(t){return{restrict:"AE",templateUrl:"navigation/altthemes.html",scope:{current:"="},link:function(e){t.getThemes().then(function(t){e.themes=t}),t.getCurrentTheme().then(function(t){e.theme=t}),e.changeTheme=function(n){e.theme=n,t.setTheme(n.key)}}}}]).controller("altthemesCtrl",["altthemesService",function(t){this.service=t}]).filter("altthemesFilter",function(){return function(t,e){var n=[];return e?(t&&t.forEach(function(t){t.themes&&t.themes.some(function(t){return t===e.key})&&n.push(t)}),n):t}}).factory("altthemesService",["$q","$http","storageService",function(t,e,n){var r="finder.current.theme",a="finder/resources/config/themes.json",i="All",o=[],s=this;return this.themes=[],this.theme=null,n.getItem(r).then(function(t){t||(t=i),e.get(a,{cache:!0}).then(function(e){var n=e.data.themes;s.themes=n,s.theme=n[t],angular.forEach(n,function(t,e){t.key=e}),o.forEach(function(t){t.resolve(s.theme)})})}),this.getCurrentTheme=function(){if(this.theme)return t.when(s.theme);var e=t.defer();return o.push(e),e.promise},this.getThemes=function(){return e.get(a,{cache:!0}).then(function(t){return t.data.themes})},this.setTheme=function(t){this.theme=this.themes[t],n.setItem(r,t)},this}]).filter("altthemesEnabled",function(){return function(t){return t?t.filter(function(t){return!!t.enabled}):t}}).filter("altthemesMatchCurrent",function(){return function(t,e){return t?t.filter(function(t){return!!t.keys.find(function(t){return t===e})}):t}}),angular.module("finder.navigation",["finder.altthemes"]).directive("finderNavigation",[function(){return{restrict:"AE",template:"<alt-themes current='current'></alt-themes>",scope:{current:"=?"},link:function(t){t.username="Anonymous",t.current||(t.current="none")}}}]).factory("navigationService",[function(){return{}}]),angular.module("finder.pill",[]).directive("finderPill",["searchService",function(t){return{restrict:"EA",templateUrl:"pill/pill.html",scope:{item:"=",update:"&",name:"@?"},link:function(e){e.item.label&&(e.label=e.item.label.charAt(0).toUpperCase()+e.item.label.slice(1)+": "),e.name||(e.name="name"),e.deselect=function(){e.item.selected=!1,t.filtered()}}}}]),angular.module("finder.proxy",[]).provider("proxy",function(){this.$get=["$http","$q",function(t,e){var n="proxy/";return this.setProxyBase=function(t){n=t},{get:function(t,e){return this._method("get",t,e)},post:function(t,e){return this._method("post",t,e)},put:function(t,e){return this._method("put",t,e)},_method:function(e,r,a){return t[e](n+r,a).then(function(t){return t.data})}}}]}),angular.module("finder.reset",[]).directive("resetPage",function(t){return{restrict:"AE",scope:{},templateUrl:"reset/reset.html",controller:["$scope",function(e){e.reset=function(){t.location.reload()}}]}}),angular.module("finder.scroll",[]).directive("commonScroller",["$timeout",function(t){return{scope:{more:"&",buffer:"=?"},link:function(e,n,r){var a=void 0;e.buffer||(e.buffer=100),n.on("scroll",function(n){function r(){e.more&&i.scrollHeight-i.scrollTop<=i.clientHeight+e.buffer&&e.more()}var i=n.currentTarget;t.cancel(a),a=t(r,120)})}}}]);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),ShapeService=function(){function t(e){var n=this;_classCallCheck(this,t),e.getMap().then(function(t){n.map=t}),this.names={metadata:{color:"#114400",weight:1,fillOpacity:.1},bounds:{color:"#ff7800",weight:1,fillOpacity:.1},dataset:{color:"#000000",weight:3,fillOpacity:.1},zoom:{color:"#ff0000",weight:3,fillOpacity:0}}}return _createClass(t,[{key:"rectangle",value:function(t,e){return L.rectangle(e,this.names[t]).addTo(this.map)}},{key:"zoom",value:function(t,e){function n(){r.opacity>0?(r.opacity-=.05,a.setStyle(r),this.zoomTimer=setTimeout(n,150)):a.remove()}this.zoomLayer&&(this.clearZoomCallback&&this.clearZoomCallback(),this.zoomLayer.remove(),clearTimeout(this.zoomTimer)),this.clearZoomCallback=e;var r=Object.assign({},this.names.zoom),a=this.zoomLayer=L.rectangle(t,r).addTo(this.map);return r.opacity=1,this.zoomTimer=setTimeout(n,2e3),this.map.fitBounds(t)}}]),t}();angular.module("finder.shape",[]).service("shapeService",ShapeService),ShapeService.$inject=["mapService"],angular.module("finder.side-panel",[]).factory("panelSideFactory",["$rootScope","$timeout",function(t,e){function n(t,e){var n=t.active;return n===e?(t.active=null,t.width=0):t.active=e,!n}var r={left:{active:null,width:0},right:{active:null,width:0}};return{state:r,setLeft:function(t){var e=n(r.left,t);return e&&(r.left.width=320),e},setRight:function(e){r.right.width=e.width;var a=n(r.right,e.name);return t.$broadcast("side.panel.change",{side:"right",data:r.right,width:e.width}),a}}}]).directive("sidePanelRightOppose",["panelSideFactory",function(t){return{restrict:"E",transclude:!0,template:'<div class="contentContainer" ng-attr-style="right:{{right.width}}"><ng-transclude></ng-transclude></div>',link:function(e){e.right=t.state.right}}}]).directive("sidePanelRight",["panelSideFactory",function(t){return{restrict:"E",transclude:!0,templateUrl:"side-panel/side-panel-right.html",link:function(e){e.right=t.state.right,e.closePanel=function(){t.setRight({name:null,width:0})}}}}]).directive("panelTrigger",["panelSideFactory",function(t){return{restrict:"E",transclude:!0,templateUrl:"side-panel/trigger.html",scope:{"default":"@?",panelWidth:"@",name:"@",iconClass:"@",panelId:"@"},link:function(e){e.toggle=function(){t.setRight({width:e.panelWidth,name:e.panelId})},e["default"]&&t.setRight({width:e.panelWidth,name:e.panelId})}}}]).directive("panelOpenOnEvent",["$rootScope","panelSideFactory",function(t,e){return{restrict:"E",scope:{panelWidth:"@",eventName:"@",panelId:"@",side:"@?"},link:function(n){n.side||(n.side="right"),t.$on(n.eventName,function(t,r){var a=e.state[n.side];if(a&&(!a.active||n.panelId!==a.active)){var i={width:n.panelWidth,name:n.panelId};"right"===n.side?e.setRight(i):e.setLeft(i)}})}}}]).directive("panelCloseOnEvent",["$rootScope","panelSideFactory",function(t,e){return{restrict:"E",scope:{eventName:"@",side:"@?"},link:function(n){n.side||(n.side="right"),t.$on(n.eventName,function(t,r){var a=e.state[n.side];if(a&&a.active){var i={name:null};"right"===n.side?e.setRight(i):e.setLeft(i)}})}}}]).directive("sidePanelLeft",["panelSideFactory",function(t){return{restrict:"E",transclude:!0,templateUrl:"side-panel/side-panel-left.html",link:function(e){e.left=t.state.left,e.closeLeft=function(){t.setLeft(null)}}}}]),angular.module("finder.storage",[]).factory("storageService",["$log","$q",function(t,e){var n="elvis.finder";return{setGlobalItem:function(t,e){this._setItem("_system",t,e)},setItem:function(t,e){this._setItem(n,t,e)},_setItem:function(e,n,r){t.debug("Fetching state for key locally"+n),localStorage.setItem(e+"."+n,JSON.stringify(r))},getGlobalItem:function(t){return this._getItem("_system",t)},getItem:function(t){var r=e.defer();return this._getItem(n,t).then(function(t){r.resolve(t)}),r.promise},_getItem:function(n,r){t.debug("Fetching state locally for key "+r);var a=localStorage.getItem(n+"."+r);if(a)try{a=JSON.parse(a)}catch(i){}return e.when(a)}}}]),angular.module("finder.restrict.pan",[]).directive("restrictPan",["mapService",function(t){return{restrict:"AE",scope:{bounds:"="},link:function(e){t.getMap().then(function(t){var n=e.bounds,r=n[0],a=n[1],i=L.latLng(r[0],r[1]),o=L.latLng(a[0],a[1]),s=L.latLngBounds(i,o);t.setMaxBounds(s),t.on("drag",function(){t.panInsideBounds(s,{animate:!1})})})}}}]),angular.module("finder.utils",[]).filter("finderSplitBar",function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="";return t.split("|").forEach(function(t,n,r){e+=(n&&n<r.length-1?",":"")+" ",n&&n===r.length-1&&(e+="or "),e+=t}),e}}).filter("finderGoogleLink",["configService",function(t){var e="https://www.google.com/maps/search/?api=1&query=${lat},${lng}";return function(t){if(!t)return"";var n=t.location.split(" ");return e.replace("${lng}",n[0]).replace("${lat}",n[1])}}]).directive("finderGoogleAnchor",["configService",function(t){return{scope:{linkTitle:"@",item:"="},template:'<span ng-if="hide">{{item.name}}</span><a ng-if="!hide" ng-href="{{item | finderGoogleLink}}" target="_google" title="{{linkTitle}}">{{item.name}}</a>',link:function(e){t.getConfig("hideGoogleLink").then(function(t){e.hide=!!t})}}}]).factory("finderUtilsService",["configService",function(t){var e={};return e}]),AboutService.$inject=["configService"],angular.module("finder.about",[]).directive("finderAbout",["$interval","aboutService",function(t,e){return{templateUrl:"about/about.html",scope:{},link:function(n,r){var a=void 0;n.about=e.getState(),n.over=function(){t.cancel(a),n.about.ingroup=!0},n.out=function(){a=t(function(){n.about.ingroup=!1},1e3)},n.unstick=function(){n.about.ingroup=n.about.show=n.about.stick=!1,r.find("a").blur()}}}}]).directive("finderAboutLink",["$interval","aboutService",function(t,e){return{restrict:"AE",templateUrl:"about/button.html",scope:{},link:function(n){var r=void 0;n.about=e.getState(),n.over=function(){t.cancel(r),n.about.show=!0},n.toggleStick=function(){n.about.stick=!n.about.stick,n.about.stick||(n.about.show=n.about.ingroup=!1)},n.out=function(){r=t(function(){n.about.show=!1},700)}}}}]).factory("aboutService",AboutService);var RootCtrl=function t(e,n){var r=this;_classCallCheck(this,t),n.getMap().then(function(t){t.fitBounds([[-9,155],[-45,112]]),r.map=t}),e.getConfig().then(function(t){r.data=t})};RootCtrl.$invoke=["configService","mapService"],angular.module("FinderApp",["explorer.config","explorer.confirm","explorer.enter","explorer.flasher","explorer.googleanalytics","explorer.info","explorer.message","explorer.modal","explorer.persist","explorer.version","exp.ui.templates","explorer.map.templates","ui.bootstrap","ngAutocomplete","ngSanitize","page.footer","geo.map","geo.maphelper","finder.about","finder.cc","finder.contributors","finder.extent","finder.find","finder.header","finder.help","finder.lock","finder.maps","finder.navigation","finder.panes","finder.popover","finder.proxy","finder.reset","finder.side-panel","finder.shape","finder.solr","finder.splash","finder.templates","finder.toolbar","finder.utils"]).config(["configServiceProvider","persistServiceProvider","projectsServiceProvider","versionServiceProvider",function(t,e,n,r){t.location("finder/resources/config/config.json?v=4"),t.dynamicLocation("finder/resources/config/configclient.json?"),r.url("finder/assets/package.json"),e.handler("local"),n.setProject("finder")}]).controller("RootCtrl",RootCtrl).filter("bytes",function(){return function(t,e){if(isNaN(parseFloat(t))||!isFinite(t))return"-";"undefined"==typeof e&&(e=0);var n=["bytes","kB","MB","GB","TB","PB"],r=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,Math.floor(r))).toFixed(e)+" "+n[r]}}).factory("userService",[function(){function t(){return!0}return{login:t,hasAcceptedTerms:t,setAcceptedTerms:t,getUsername:function(){return"anon"}}}]),"every"in Array.prototype||(Array.prototype.every=function(t,e){for(var n=0,r=this.length;n<r;n++)if(n in this&&!t.call(e,this[n],n,this))return!1;return!0}),Array.from||(Array.from=function(){var t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},n=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},r=Math.pow(2,53)-1,a=function(t){var e=n(t);return Math.min(Math.max(e,0),r)};return function(t){var n=this,r=Object(t);if(null===t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i=arguments.length>1?arguments[1]:void 0,o=void 0;if("undefined"!=typeof i){if(!e(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var s=a(r.length),l=e(n)?Object(new n(s)):new Array(s),c=0,u=void 0;c<s;)u=r[c],i?l[c]="undefined"==typeof o?i(u,c):i.call(o,u,c):l[c]=u,c+=1;return l.length=s,l}}());var ExtentService=function e(t,n){function r(){t.getMap().then(function(t){t.on("moveend",a),t.on("zoomend",a),a()})}function a(){t.getMap().then(function(t){var e=t.getBounds();i.yMin=e.getSouth(),i.xMin=e.getWest(),i.yMax=e.getNorth(),i.xMax=e.getEast(),n.refresh()})}_classCallCheck(this,e);var i=n.getSearchCriteria().bbox;return i.fromMap&&r(),{getParameters:function(){return i}}};ExtentService.$inject=["mapService","searchService"],angular.module("finder.extent",["explorer.switch"]).directive("finderExtent",["extentService",function(t){return{restrict:"AE",templateUrl:"extent/extent.html",controller:["$scope",function(e){e.parameters=t.getParameters()}],link:function(t,e,n){}}}]).factory("extentService",ExtentService);var FindService=function n(t,e){_classCallCheck(this,n);var r=this;this.data={},t.getMap().then(function(t){function n(){var n=t.getBounds();e.facets(n).then(function(t){r.data.list=t,r.data.bounds={west:n.getWest(),east:n.getEast(),north:n.getNorth(),south:n.getSouth()}})}t.on("resize moveend viewreset",n)})};FindService.$inject=["mapService","solrService"],angular.module("finder.find",["finder.metadata"]).directive("findList",["$rootScope","findService","metadataService",function(t,e,n){return{restrict:"AE",templateUrl:"find/findlist.html",link:function(r){r.data=e.data,r.metadata=n.data,r.selection=!1,t.$on("metadata.selected",function(){r.selection=!0}),t.$on("metadata.cleared",function(){r.metadata=n.data,r.selection=!1})}}}]).directive("metadataMatch",["$rootScope","shapeService",function(t,e){return{restrict:"AE",templateUrl:"find/metadatamatches.html",scope:{metadata:"=",item:"="},link:function(n){var r=null;n.select=function(){t.$broadcast("metadata.selected",Object.assign({},n.item,n.metadata))},n.show=function(t){console.log("show..."),n.hide(),r=e.rectangle("metadata",[[t.bbox__minY,t.bbox__minX],[t.bbox__maxY,t.bbox__maxX]])},n.hide=function(){console.log("Hide..."),r&&r.remove()},n.$on("$destroy",function(){console.log("Destroying..."),r&&r.remove()})}}}]).directive("finderQuickfind",["findService",function(t){return{restrict:"AE",templateUrl:"find/quickfind.html",link:function(e){e.state=t.data,e.loadDocs=function(){return t.filtered().then(function(t){return t.response.docs})},e.clear=function(){e.state.searched=null,$timeout(function(){$rootScope.$broadcast("clear.button.fired")},10)},e.search=function(t){e.showFilters=!1,searchService.search(t),$timeout(function(){$rootScope.$broadcast("search.button.fired")},100)}}}}]).directive("finderZoom",["shapeService",function(t){return{templateUrl:"find/zoombutton.html",restrict:"AE",scope:{item:"=",title:"@"},link:function(e){var n=null;e.zoom=function(){clearTimeout(n);var r=[[e.item.bbox__minY,e.item.bbox__minX],[e.item.bbox__maxY,e.item.bbox__maxX]];e.item.lastZoom=!0,t.zoom(r,function(){e.item.lastZoom=!1}),n=setTimeout(function(){e.item.lastZoom=!1},4e3)}}}}]).filter("findTooltip",[function(){return function(t){var e="<div style='text-align:left'>";if(t.variant){var n=t.variant.split("|");n.forEach(function(t,r){e+=r?"":"Also known as",e+=(r&&r<n.length-1?",":"")+" ",r&&r===n.length-1&&(e+="or "),e+=t}),e+="<br/>"}return e+="Lat "+t.location.split(" ").reverse().join("&deg; Lng ")+"&deg;<br/>Feature type: "+t.feature+"</div>"}}]).filter("fileSize",function(){var t=1e6,e=1e3*t,n=1e3*e;return function(r){return r?(""+r).indexOf(" ")>-1?r:(r=parseFloat(r),r<1e3?r+" bytes":r<t?(r/1e3).toFixed(1)+" kB":r<e?(r/t).toFixed(1)+" MB":r<n?(r/e).toFixed(1)+" GB":(r/n).toFixed(1)+" TB"):"-"}}).service("findService",FindService);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),MapsCtrl=function(){function t(e){_classCallCheck(this,t),this.mapService=mapService}return _createClass(t,[{key:"toggleLayer",value:function(t){this.mapsService.toggleShow(t)}}]),t}();MapsCtrl.$inject=["mapsService"];var MapsService=function(){function t(e,n){_classCallCheck(this,t),this.CONFIG_KEY="layersTab",this.configService=e,this.mapService=n,this.configService=e}return _createClass(t,[{key:"getConfig",value:function(){return this.configService.getConfig(this.CONFIG_KEY)}},{key:"toggleShow",value:function(t,e){var n=this;this.configService.getConfig(this.CONFIG_KEY).then(function(e){t.layer?(t.displayed=!1,n.mapService.removeFromGroup(t,e.group)):(n.mapService.addToGroup(t,e.group),t.displayed=!0)})}}]),t}();MapsService.$inject=["configService","mapService"],angular.module("finder.maps",["explorer.layer.slider"]).directive("finderMaps",["mapsService",function(t){return{templateUrl:"maps/maps.html",link:function(e){t.getConfig().then(function(t){e.layersTab=t})}}}]).controller("MapsCtrl",MapsCtrl).service("mapsService",MapsService),angular.module("finder.metadata.item",[]).directive("metadataItem",["shapeService",function(t){return{templateUrl:"metadata/item.html",scope:{item:"="},link:function(e,n){var r=null;e.show=function(){var n=e.item;e.hide(),r=t.rectangle("dataset",[[n.bbox__minY,n.bbox__minX],[n.bbox__maxY,n.bbox__maxX]])},e.hide=function(){r&&r.remove()}}}}]);var MetadataService=function r(t,e,n){var a=this;_classCallCheck(this,r),this.configService=n,this.request=t,this.data={},this.configService.getConfig("metadata").then(function(t){a.request.get(t.allMetadataUrl).then(function(t){var e={};t.data.response.docs.forEach(function(t){e[t.metadata_id]=t}),a.data.map=e})})};MetadataService.$inject=["$http","$q","configService"],angular.module("finder.metadata",["bw.paging","finder.metadata.item"]).directive("metadataView",["$rootScope","flashService","mapService","solrService","shapeService",function(t,e,n,r,a){return{restrict:"AE",templateUrl:"metadata/metadataview.html",link:function(i){var o=null;t.$on("metadata.selected",function(t,s){var l=e.add("Retrieving file information",3e4,!0);n.getMap().then(function(t){i.bounds=t.getBounds(),o=a.rectangle("bounds",i.bounds),r.tree(s.metadata_id,i.bounds).then(function(t){i.datasets=t,l.remove()})}),i.metadata=s}),i.clear=function(){i.metadata=null,o.remove(),t.$broadcast("metadata.cleared")}}}}]).directive("metadataType",[function(){return{scope:{type:"="},templateUrl:"metadata/type.html",link:function(t){t.toggleAll=function(t){console.log("yes");var e=!0;t.forEach(function(t){e&=t.selected}),t.forEach(function(t){t.selected=!e})},t.allSelected=function(t){return t.reduce(function(t,e){return t&&e.selected},!0)}}}}]).directive("metadataSubtype",["$rootScope",function(t){return{scope:{subtypes:"="},templateUrl:"metadata/subtype.html",link:function(e,n){e.paging={page:1,pageSize:20},t.$on("metadata.cleared",function(){e.paging.page=1,e.data=null}),e.$watch("subtypes",function(t,n){t?e.setPage(1,20):e.data=null}),e.setPage=function(t,n){e.data=e.subtypes.slice(n*(t-1),t*n)},e.setPage(1,20)}}}]).directive("finderMetadataLink",[function(){return{restrict:"AE",template:"<a target='_blank' ng-if='url' ng-href='{{url}}' title='{{hover}}'>{{name}}</a><span ng-if='!url'>{{name}}</span>",scope:{url:"=?",hover:"=?",name:"="},link:function(t,e){}}}]).filter("sumFiles",[function(){return function(t){return t.reduce(function(t,e){return t+e.file_size},0)}}]).filter("anySelected",[function(){return function(t){return t.some(function(t){return t.selected})}}]).filter("allSelected",[function(){return function(t){return t.reduce(function(t,e){return t&&e.selected},!0)}}]).filter("selected",[function(){return function(t){return t.filter(function(t){return t.selected})}}]).filter("length",[function(){return function(t){return t.length}}]).service("metadataService",MetadataService),angular.module("finder.popover",[]).directive("finderPopover",[function(){return{templateUrl:"popover/popover.html",restrict:"A",transclude:!0,scope:{closeOnEscape:"@",show:"=",containerClass:"=",direction:"@"},link:function(t,e){function n(e){27===e.which&&(e.stopPropagation(),e.preventDefault(),t.$apply(function(){t.show=!1}))}t.direction||(t.direction="bottom"),!t.closeOnEscape||t.closeOnEscape!==!0&&"true"!==t.closeOnEscape||e.on("keyup",n)}}}]),angular.module("finder.panes",[]).directive("finderPanes",["$rootScope","$timeout","mapService",function(t,e,n){return{templateUrl:"panes/panes.html",scope:{defaultItem:"@",data:"="},controller:["$scope",function(r){var a=!1;r.view=r.defaultItem,t.$on("side.panel.change",function(t){function n(){var t=document.createEvent("HTMLEvents");t.initEvent("resize",!1,!0),window.dispatchEvent(t)}n(),e(n,100),e(n,200),e(n,300),e(n,500)}),r.setView=function(e){var i=r.view,o=0;r.view===e?(e&&(a=!0,o=1e3),r.view=""):(e||(a=!0),r.view=e),t.$broadcast("view.changed",r.view,i),a&&n.getMap().then(function(t){t._onResize()})},e(function(){t.$broadcast("view.changed",r.view,null)},50)}]}}]),angular.module("finder.download",[]).directive("downloadContinue",[function(){return{scope:{datatree:"="},link:function(t){t.$watch("datatree",function(t){})}}}]);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Solr=function(){function t(e,n){_classCallCheck(this,t),this.requester=n,this.config=e}return _createClass(t,[{key:"facets",value:function(t){return this.requester.get(this.config.metadataFacetUrl+"&fq="+getBounds(t)).then(function(t){return t.data.facets.categories.buckets.filter(function(t){return t.count}).map(function(t){return{name:t.val,count:t.count,file_size:t.x}})})}},{key:"records",value:function(t,e){return this.requester.get(this.config.metadataRecordsUrl+"&fq="+getBounds(e)+"&q=metadata_id:"+t).then(function(t){var e=t.data.response.docs;return e.sort(function(t,e){return t.file_name<e.file_name?-1:t.file_name===e.file_name?0:1}),e})}},{key:"tree",value:function(t,e){return this.records(t,e).then(function(t){var e={};return t.forEach(function(t){var n=e[t.type];n||(e[t.type]=n={});var r=n[t.subType];r||(r=n[t.subType]=[]),r.push(t)}),e})}},{key:"arrayToCounts",value:function(t){var e=void 0,n=[];return t.forEach(function(t,r){r%2?n.push({name:e,count:t}):e=t}),n}},{key:"arrayToMap",value:function(t){var e=void 0,n={};return t.forEach(function(t,r){r%2?n[e]=t:e=t}),n}}]),t}();angular.module("finder.solr",[]).factory("solrService",SolrService),SolrService.$inject=["$http","$rootScope","$timeout","configService"],angular.module("finder.splash",["ui.bootstrap.modal"]).directive("finderSplash",["$rootScope","$uibModal","$log","splashService",function(t,e,n,r){return{controller:["$scope","splashService",function(t,e){t.acceptedTerms=!0,e.getReleaseNotes().then(function(n){t.releaseMessages=n,t.acceptedTerms=e.hasViewedSplash()})}],link:function(a,i){var o=void 0;a.$watch("acceptedTerms",function(t){t===!1&&(o=e.open({templateUrl:"splash/splash.html",size:"lg",backdrop:"static",keyboard:!1,controller:["$scope","acceptedTerms","messages",function(t,e,n){t.acceptedTerms=e,t.messages=n,t.accept=function(){o.close(!0)}}],resolve:{acceptedTerms:function(){return a.acceptedTerms},messages:function(){return a.releaseMessages}}}),o.result.then(function(t){n.info("Accepted terms"),a.acceptedTerms=t,r.setHasViewedSplash(t)},function(){n.info("Modal dismissed at: "+new Date)}))}),t.$on("logoutRequest",function(){userService.setAcceptedTerms(!1)})}}}]).factory("splashService",["$http",function(t){function e(t){t?sessionStorage.setItem(r,!0):sessionStorage.removeItem(r)}function n(){return!!sessionStorage.getItem(r)}var r="finder.accepted.terms",a="finder/resources/config/releasenotes.json";return{getReleaseNotes:function(){return t({method:"GET",url:a+"?t="+Date.now()}).then(function(t){return t.data})},hasViewedSplash:n,setHasViewedSplash:e}}]).filter("priorityColor",[function(){var t={IMPORTANT:"red",HIGH:"blue",MEDIUM:"orange",LOW:"gray"};return function(e){return e in t?t[e]:"black"}}]).filter("wordLowerCamel",function(){return function(t){return t.charAt(0)+t.substr(1).toLowerCase()}}).filter("sortNotes",[function(){return function(t){if(t){var e=t.slice(0).sort(function(t,e){return t.priority==e.priority?t.lastUpdate==e.lastUpdate?0:e.lastUpdate-t.lastUpdate:"IMPORTANT"==t.priority?-11:1});return e}}}]),angular.module("finder.toolbar",[]).directive("finderToolbar",[function(){return{templateUrl:"toolbar/toolbar.html",controller:"toolbarLinksCtrl",transclude:!0}}]).controller("toolbarLinksCtrl",["$scope","configService",function(t,e){var n=this;e.getConfig().then(function(t){n.links=t.toolbarLinks}),t.item="",t.toggleItem=function(e){t.item=t.item===e?"":e}}]),angular.module("finder.templates",[]).run(["$templateCache",function(t){t.put("about/about.html",'<span class="about" ng-mouseenter="over()" ng-mouseleave="out()"\r\n      ng-class="(about.show || about.ingroup || about.stick) ? \'transitioned-down\' : \'transitioned-up\'">\r\n   <button class="undecorated about-unstick" ng-click="unstick()" style="float:right">X</button>\r\n   <div class="aboutHeading">About Composite Gazetteer of Australia</div>\r\n   <div ng-repeat="item in about.items">\r\n      <a ng-href="{{item.link}}" name="about{{$index}}" title="{{item.heading}}" target="_blank">\r\n         {{item.heading}}\r\n      </a>\r\n   </div>\r\n</span>'),
t.put("about/button.html",'<button ng-mouseenter="over()" ng-mouseleave="out()"\r\n      ng-click="toggleStick()" tooltip-placement="left" uib-tooltip="About Composite Gazetteer of Australia"\r\n      class="btn btn-primary btn-default">About</button>'),t.put("extent/extent.html",'<div class="row" style="border-top: 1px solid gray; padding-top:5px">\r\n\t<div class="col-md-5">\r\n\t\t<div class="form-inline">\r\n\t\t\t<label>\r\n\t\t\t\t<input id="extentEnable" type="checkbox" ng-model="parameters.fromMap" ng-click="change()"></input> \r\n\t\t\t\tRestrict area to map\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t</div>\r\n\t \r\n\t<div class="col-md-7" ng-show="parameters.fromMap">\r\n\t\t<div class="container-fluid">\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-md-offset-3 col-md-8">\r\n\t\t\t\t\t<strong>Y Max:</strong> \r\n\t\t\t\t\t<span>{{parameters.yMax | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-md-6">\r\n\t\t\t\t\t<strong>X Min:</strong>\r\n\t\t\t\t\t<span>{{parameters.xMin | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="col-md-6">\r\n\t\t\t\t\t<strong>X Max:</strong>\r\n\t\t\t\t\t<span>{{parameters.xMax | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-md-offset-3 col-md-8">\r\n\t\t\t\t\t<strong>Y Min:</strong>\r\n\t\t\t\t\t<span>{{parameters.yMin | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("find/findlist.html",'<div ng-show="selection">\r\n   <metadata-view></metadata-view>\r\n</div>\r\n<div ng-show="!selection">\r\n   <h4 style="padding-right:10px">\r\n      Projects in Map View\r\n   </h4>\r\n   <div style="padding: 5px;padding-bottom:10px">Bounded by: {{state.bounds.west | number : 4}}° west,\r\n   {{state.bounds.north | number : 4}}° north,\r\n   {{state.bounds.east | number : 4}}° east,\r\n   {{state.bounds.south | number : 4}}° south\r\n   </div>\r\n   <div ng-repeat="item in data.list">\r\n      <metadata-match item="item" metadata="metadata.map[item.name]"></metadata-match>\r\n   </div>\r\n</div>'),t.put("find/metadatamatches.html",'<div style="padding:5px" ng-mouseenter="show(metadata)" ng-mouseleave="hide(metdata)">\r\n   <div class="row" style="font-weight:bold" ng-hide="metadata.show">\r\n      <div class="col-md-8">\r\n         <button type="button" class="undecorated" title="View full title and abstract of this dataset" ng-click="metadata.show= true">\r\n            <i class="fa fa-2x fa-caret-right" style="font-size:120%"></i>\r\n         </button>\r\n         <button type="button" class="undecorated" title="Select project" ng-click="select()">\r\n            <i class="fa fa-2x fa-square-o" style="font-size:120%"></i>\r\n         </button>\r\n         <finder-zoom title="Zoom to and restrict search to this data set\'s extent" item="metadata"></finder-zoom>\r\n         <div style="width:85%;float:right;" class="ellipsis" title="{{metadata.title}}">\r\n            {{metadata.source}} -\r\n            <finder-metadata-link hover="metadata.title" url="metadata.metadata_url" name="metadata.title"></finder-metadata-link>\r\n         </div>\r\n      </div>\r\n      <div class="col-md-4">\r\n         {{item.count}} matches, {{item.file_size | fileSize}}\r\n      </div>\r\n   </div>\r\n   <div class="row" ng-show="metadata.show">\r\n      <div class="col-md-12">\r\n         <button type="button" class="undecorated" title="Hide full title and abstract of this dataset" ng-click="metadata.show = false">\r\n            <i class="fa fa-2x fa-caret-down" style="font-size:120%"></i>\r\n         </button>\r\n         <button type="button" class="undecorated" title="Select project" ng-click="select()">\r\n            <i class="fa fa-2x fa-square-o" style="font-size:120%"></i>\r\n         </button>\r\n         <span style="font-weight:bold">\r\n            {{metadata.source}} -\r\n            <finder-metadata-link hover="metadata.title" url="metadata.metadata_url" name="metadata.title"></finder-metadata-link>\r\n         </span>\r\n         ({{item.count}} matches, {{item.file_size | fileSize}}) - {{metadata.abstract}}\r\n      </div>\r\n   </div>\r\n</div>'),t.put("find/quickfind.html",'<div class="search-text">\r\n   <div class="input-group input-group-sm">\r\n      <input type="text" ng-model="state.filter" placeholder="Match by metadata ID..." ng-model-options="{ debounce: 300}" typeahead-on-select="select($item, $model, $label)"\r\n         ng-disabled="state.searched" typeahead-template-url="find/typeahead.html" class="form-control" typeahead-min-length="0"\r\n         uib-typeahead="doc as doc.name for doc in loadDocs(state.filter)" typeahead-loading="loadingLocations" typeahead-no-results="noResults"\r\n         elevation-clear>\r\n\r\n      <span class="input-group-btn">\r\n         <button class="btn btn-primary" type="button" ng-click="showFilters = !showFilters" ng-hide="state.searched" title="SHow/hide filters such as source, type, category and feature type">Filters...</button>\r\n         <button class="btn btn-primary" title="Clear the current search and enable discovery" type="button" ng-click="clear()" ng-show="state.searched">Clear Search Results</button>\r\n         <button class="btn btn-primary" type="button" ng-click="search()" title="Search for all features matching your search criteria"\r\n         ng-hide="state.searched">Search</button>\r\n      </span>\r\n   </div>\r\n</div>\r\n<div class="filters" ng-show="showFilters" style="background-color: white">\r\n   <elevation-filter></elevation-filter>\r\n   <div class="panel panel-default" style="margin-bottom:5px">\r\n      <div class="panel-heading">\r\n         <h4 class="panel-title">\r\n            Filter\r\n            <span ng-if="summary.sources.length">ing</span> by source...\r\n         </h4>\r\n      </div>\r\n      <div style="max-height: 200px; overflow-y: auto; padding:5px">\r\n         <elevation-sources update="update()"></elevation-sources>\r\n      </div>\r\n   </div>\r\n</div>'),t.put("find/typeahead.html",'<a elevation-options ng-mouseenter="enter()" ng-mouseleave="leave()" tooltip-append-to-body="true" tooltip-placement="bottom"\r\n   uib-tooltip-html="match.model | findTooltip">\r\n   <span ng-bind-html="match.model.file_name | uibTypeaheadHighlight:query"></span>\r\n   (\r\n   <span ng-bind-html="match.model.source"></span>)\r\n</a>'),t.put("find/zoombutton.html",'<button type="button" class="undecorated" title="{{title}}" ng-click="zoom()">\r\n   <i class="fa fa-lg fa-paper-plane-o" ng-style="item.lastZoom?{\'color\':\'red\'}:{}"></i>\r\n</button>'),t.put("maps/maps.html",'<div  ng-controller="MapsCtrl as maps">\r\n\t<div style="position:relative;padding:5px;padding-left:10px;" >\r\n\t\t<div class="panel panel-default" style="padding:5px;" >\r\n\t\t\t<div class="panel-heading">\r\n\t\t\t\t<h3 class="panel-title">Layers</h3>\r\n\t\t\t</div>\r\n\t\t\t<div class="panel-body">\r\n\t\t\t\t<div class="container-fluid">\r\n\t\t\t\t\t<div class="row" ng-repeat="layer in layersTab.layers" \r\n\t\t\t\t\t\t\tstyle="padding:7px;padding-left:10px;position:relative" ng-class-even="\'even\'" ng-class-odd="\'odd\'">\r\n\t\t\t\t\t\t<div style="position:relative;left:6px;">\r\n\t\t\t\t\t\t\t<a href="{{layer.metadata}}" target="_blank" \r\n\t\t\t\t\t\t\t\t\tclass="featureLink" title=\'View metadata related to "{{layer.name}}". (Opens new window.)\'>\r\n\t\t\t\t\t\t\t\t{{layer.name}}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<div class="pull-right" style="width:270px;" tooltip="Show on map. {{layer.help}}">\r\n\t\t\t\t\t\t\t\t<span style="padding-left:10px;width:240px;" class="pull-left"><explorer-layer-slider layer="layer.layer"></explorer-layer-slider></span>\r\n\t\t\t\t\t\t\t\t<button style="padding:2px 8px 2px 2px;" type="button" class="undecorated featureLink pull-right" href="javascript:;" \r\n\t\t\t\t\t\t\t\t\t\tng-click="maps.toggleLayer(layer)" >\r\n\t\t\t\t\t\t\t\t\t<i class="fa" ng-class="{\'fa-eye-slash\':(!layer.displayed), \'fa-eye active\':layer.displayed}"></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("metadata/datasets.html",'<div class="container-fluid">\r\n   <div class="row" ng-repeat="(key, value) in datasets">\r\n      <h5>{{key}}</h5>\r\n      <metadata-type type="value"></metadata-type>\r\n   </div>\r\n</div>'),t.put("metadata/item.html",'<div ng-mouseenter="show()" ng-mouseleave="hide()">\r\n   <span>\r\n      <input type="checkbox" ng-model="item.selected" />\r\n      <finder-cc org-name="item.source"></finder-cc>\r\n      {{item.file_name}}\r\n   </span>\r\n   <span class="pull-right">\r\n      {{item.file_size | fileSize}}\r\n   </span>\r\n</div>'),t.put("metadata/metadataview.html",'<div>\r\n   <span style="float:left; width:70%">\r\n      <h4>\r\n         Project in Detail\r\n      </h4>\r\n   </span>\r\n   <button style="float:right; padding:4px" class="undecorated" ng-click="clear()">[Return to Projects]</button>\r\n   <div class="container-fluid">\r\n      <div class="row">\r\n         <div class="col-md-12">\r\n            <span style="font-weight:bold">\r\n               {{metadata.source}} -\r\n               <finder-metadata-link\r\n                  hover="\'Metadata ID: \' + metadata.metadata_id"\r\n                  url="metadata.metadata_url"\r\n                  name="metadata.title">\r\n               </finder-metadata-link>\r\n            </span>\r\n         </div>\r\n      </div>\r\n      <div class="row">\r\n         <div class="col-md-12">\r\n            {{metadata.abstract}}<br/>\r\n            <strong>\r\n               Metadata ID:\r\n               <finder-metadata-link\r\n                  hover="\'Metadata ID: \' + metadata.metadata_id"\r\n                  url="metadata.metadata_url"\r\n                  name="metadata.metadata_id">\r\n               </finder-metadata-link>\r\n            </strong>\r\n         </div>\r\n      </div>\r\n      <div class="row" ng-repeat="(key, value) in datasets">\r\n         <div class="col-md-12">\r\n            <h5 class="type-heading">{{key}}</h5>\r\n            <metadata-type type="value"></metadata-type>\r\n         </div>\r\n      </div>\r\n   </div>\r\n   <download-continue datatree="datasets"></download-continue>\r\n</div>'),t.put("metadata/subtype.html",'<div ng-if="subtypes">\r\n   <div ng-show="subtypes.length > paging.pageSize" paging page="paging.page" page-size="paging.pageSize" total="subtypes.length" paging-action="setPage(page, pageSize)"></div>\r\n</div>\r\n<div>\r\n   <div ng-repeat="item in data">\r\n      <metadata-item item="item"></metadata-item>\r\n   </div>\r\n</div>'),t.put("metadata/type.html",'<div class="container-fluid" style="padding-bottom: 35px;">\r\n   <div class="row" ng-repeat="(key, value) in type">\r\n      <h5>\r\n         <span>{{key}} ({{value.length| number}} files, {{value | sumFiles | fileSize}})</span>\r\n         <span class="pull-right">\r\n            <button class="pull-right undecorated ng-binding" ng-click="toggleAll(value)">\r\n               [<span ng-if="allSelected(value)">Deselect</span><span ng-if="!allSelected(value)">Select</span> all]\r\n            </button>\r\n         </span>\r\n      </h5>\r\n      <div ng-show="value | anySelected">\r\n         Selected {{value | selected | length | number}} files, {{value | selected | sumFiles | fileSize}}\r\n      </div>\r\n      <metadata-subtype subtypes="value"></metadata-subtype>\r\n   </div>\r\n</div>'),t.put("popover/popover.html",'<div class="finder-popover {{direction}}" ng-class="containerClass" ng-show="show">\r\n  <div class="arrow"></div>\r\n  <div class="finder-popover-inner" ng-transclude></div>\r\n</div>'),t.put("panes/panes.html",'<div class="mapContainer" class="col-md-12" style="padding-right:0">\r\n   <div class="panesMapContainer" geo-map configuration="data.map"></div>\r\n   <div class="base-layer-controller">\r\n    \t<div geo-draw data="data.map.drawOptions" line-event="elevation.plot.data" rectangle-event="bounds.drawn"></div>\r\n   </div>\r\n   <restrict-pan bounds="data.map.position.bounds"></restrict-pan>\r\n</div>'),t.put("side-panel/side-panel-left.html",'<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" style="width: {{left.width}}px;" ng-class="{\'cbp-spmenu-open\': left.active}">\r\n    <a href="" title="Close panel" ng-click="closeLeft()" style="z-index: 1200">\r\n        <span class="glyphicon glyphicon-chevron-left pull-right"></span>\r\n    </a>\r\n    <div ng-show="left.active === \'legend\'" class="left-side-menu-container">\r\n        <legend url="\'img/AustralianTopogaphyLegend.png\'" title="\'Map Legend\'"></legend>\r\n    </div>\r\n</div>'),t.put("side-panel/side-panel-right.html",'<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-right noPrint" ng-attr-style="width:{{right.width}}" ng-class="{\'cbp-spmenu-open\': right.active}">\r\n    <a href="" title="Close panel" ng-click="closePanel()" style="z-index: 1">\r\n        <span class="glyphicon glyphicon-chevron-right pull-left"></span>\r\n    </a>\r\n    <div ng-show="right.active === \'search\'" class="right-side-menu-container" style="z-index: 2">\r\n        <div class="panesTabContentItem" find-list ></div>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n'),t.put("download/downloadcontinue.html",'<div class="continue-container" ng-show="ctrl.selected.length">\r\n   <button class="btn btn-primary" ng-click="review()">\r\n      Review {{selected.length}} selected datasets (Approx: {{selectedSize | fileSize}})\r\n   </button>\r\n</div>'),t.put("splash/splash.html",'<div class="modal-header">\r\n   <h3 class="modal-title splash">Composite Gazetteer of Australia</h3>\r\n</div>\r\n<div class="modal-body" id="accept" ng-form exp-enter="accept()" finder-splash-modal style="width: 100%; margin-left: auto; margin-right: auto;">\r\n\t<div style="border-bottom:1px solid gray">\r\n\t\t<p>\r\n\t\t\tUsers can download the Composite Gazetteer of Australia data which is licensed under Creative Commons.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tData can be downloaded from the portal at <strong>no charge</strong> and there is no limit to how many requests you can place (please check the file size before you download your results).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIf you need datasets in full, please contact <a href="clientservices@ga.gov.au">clientservices@ga.gov.au</a>.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<a href="http://opentopo.sdsc.edu/gridsphere/gridsphere?cid=contributeframeportlet&gs_action=listTools" target="_blank">Click here for Free GIS Tools.</a>\r\n\t\t</p>\r\n\r\n\t\t<div style="padding:30px; padding-top:0; padding-bottom:40px; width:100%">\r\n\t\t\t<div class="pull-right">\r\n\t\t\t  \t<button type="button" class="btn btn-primary" ng-model="seenSplash" ng-focus ng-click="accept()">Continue</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div ng-show="messages.length > 0" class="container" style="width:100%; max-height:250px; overflow-y:auto">\r\n\t\t<div class="row" ng-class-even="\'grayline\'" style="font-weight:bold">\r\n\t\t\t<div class="col-sm-12" ><h3>News</h3></div>\r\n\t\t</div>\r\n\r\n\t\t<div class="row"ng-class-even="\'grayline\'" style="max-height:400px;overflow:auto" ng-repeat="message in messages | sortNotes">\r\n\t\t\t<div class="col-sm-12">\r\n\t\t\t\t<h4>{{message.title}} <span class="pull-right" style="font-size:70%">Created: {{message.creationDate | date : "dd/MM/yyyy"}}</span></h4>\r\n\t\t\t\t<div ng-bind-html="message.description"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("toolbar/toolbar.html",'<div class="finder-toolbar noPrint">\r\n    <div class="toolBarContainer">\r\n        <div>\r\n            <ul class="left-toolbar-items">\r\n               <li>\r\n                  <antarctic-view></antarctic-view>\r\n               </li>\r\n            </ul>\r\n            <ul class="right-toolbar-items">\r\n                <li>\r\n                    <panel-trigger panel-id="search" panel-width="540px" default="true"\r\n                        name="Projects" icon-class="fa-list"\r\n                        title="List projects that have data within current map view. Tunnel down to view individual datasets.">\r\n                    </panel-trigger>\r\n                </li>\r\n                <li>\r\n                  <panel-trigger panel-id="help" panel-width="540px" name="Help" icon-class="fa-question-circle-o" title="Show help"></panel-trigger>\r\n               </li>\r\n                <li reset-page></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>'),t.put("authorities/authorities.html",'<div ng-repeat="item in authorities" style="width:49%; display:inline-block">\r\n   <div class="ellipsis" title=\'Jurisdiction: {{item.jurisdiction}}, Authority name: {{item.name}}\'>\r\n      <input type="checkbox" ng-click="update()" ng-model="item.selected" ng-change="change()">\r\n      <span>\r\n         <a target="_blank" href="http://www.google.com/search?q={{item.name}}">{{item.code}}</a>\r\n         ({{(item.allCount | number) + (item.allCount || item.allCount == 0?\' of \':\'\')}}{{item.total | number}})\r\n      </span>\r\n   </div>\r\n</div>'),t.put("cc/cc.html",'<button type="button" class="undecorated" title="View CCBy {{details.version}} licence details"\r\n      popover-trigger="outsideClick"\r\n      uib-popover-template="template" popover-placement="bottom" popover-append-to-body="true">\r\n\t<i ng-class="{active:data.isWmsShowing}" class="fa fa-lg fa-gavel"></i>\r\n</button>'),t.put("cc/cctemplate.html",'<div>\r\n   <div class="row">\r\n      <div class="col-md-12">\r\n         <a target="_blank" ng-href="{{details.link}}">Creative Commons Attribution {{details.version}} </a>\r\n      </div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-2">\r\n         <span class="fa-stack" aria-hidden="true">\r\n         <i class="fa fa-check-circle-o fa-stack-2x" aria-hidden="true"></i>\r\n      </span>\r\n      </div>\r\n      <div class="col-md-10">\r\n         You may use this work for commercial purposes.\r\n      </div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-2">\r\n         <span class="fa-stack" aria-hidden="true">\r\n         <i class="fa fa-circle-o fa-stack-2x"></i>\r\n         <i class="fa fa-female fa-stack-1x"></i>\r\n      </span>\r\n      </div>\r\n      <div class="col-md-10">\r\n         You must attribute the creator in your own works.\r\n      </div>\r\n   </div>\r\n</div>'),t.put("contributors/contributors.html",'<span class="contributors" ng-mouseenter="over()" ng-mouseleave="out()" style="z-index:1500"\r\n      ng-class="(contributors.show || contributors.ingroup || contributors.stick) ? \'transitioned-down\' : \'transitioned-up\'">\r\n   <button class="undecorated contributors-unstick" ng-click="unstick()" style="float:right">X</button>\r\n   <div ng-repeat="contributor in contributors.orgs | activeContributors" style="text-align:cnter">\r\n      <a ng-href="{{contributor.href}}" name="contributors{{$index}}" title="{{contributor.title}}" target="_blank">\r\n         <img ng-src="{{contributor.image}}" alt="{{contributor.title}}" class="elvis-logo" ng-class="contributor.class"></img>\r\n      </a>\r\n   </div>\r\n</span>'),t.put("contributors/show.html",'<a ng-mouseenter="over()" ng-mouseleave="out()" class="contributors-link" title="Click to lock/unlock contributors list."\r\n      ng-click="toggleStick()" href="#contributors0">Contributors</a>'),t.put("header/header.html",'<div class="container-full common-header" style="padding-right:10px; padding-left:10px">\r\n   <div class="navbar-header">\r\n\r\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".ga-header-collapse">\r\n         <span class="sr-only">Toggle navigation</span>\r\n         <span class="icon-bar"></span>\r\n         <span class="icon-bar"></span>\r\n         <span class="icon-bar"></span>\r\n      </button>\r\n\r\n      <a href="/" class="appTitle visible-xs">\r\n         <h1 style="font-size:120%">{{heading}}</h1>\r\n      </a>\r\n   </div>\r\n   <div class="navbar-collapse collapse ga-header-collapse">\r\n      <ul class="nav navbar-nav">\r\n         <li class="hidden-xs">\r\n            <a href="/">\r\n               <h1 class="applicationTitle">{{heading}}</h1>\r\n            </a>\r\n         </li>\r\n      </ul>\r\n      <ul class="nav navbar-nav navbar-right nav-icons">\r\n         <li role="menuitem" style="padding-right:10px;position: relative;top: -3px;">\r\n            <span class="altthemes-container">\r\n               <span>\r\n                  <a title="Location INformation Knowledge platform (LINK)" href="http://fsdf.org.au/" target="_blank">\r\n                     <img alt="FSDF" src="finder/resources/img/FSDFimagev4.0.png" style="height: 66px">\r\n                  </a>\r\n               </span>\r\n            </span>\r\n         </li>\r\n         <li finder-navigation role="menuitem" current="current" style="padding-right:10px"></li>\r\n         <li mars-version-display role="menuitem"></li>\r\n         <li style="width:10px"></li>\r\n      </ul>\r\n   </div>\r\n   <!--/.nav-collapse -->\r\n</div>\r\n<div class="contributorsLink" style="position: absolute; right:7px; bottom:25px">\r\n   <finder-contributors-link></finder-contributors-link>\r\n</div>\r\n<!-- Strap -->\r\n<div class="row">\r\n   <div class="col-md-12">\r\n      <div class="strap-blue">\r\n      </div>\r\n      <div class="strap-white">\r\n      </div>\r\n      <div class="strap-red">\r\n      </div>\r\n   </div>\r\n</div>'),t.put("filters/tree.html",'<div style="max-height:300px; overflow-y:auto;padding-left:10px">\r\n   <div ng-repeat="group in groups | withTotals">\r\n      <button class="undecorated" ng-click="group.expanded = !group.expanded" ng-style="{color:group.color}">\r\n         <i class="fa" ng-class="{\'fa-plus\':!group.expanded, \'fa-minus\':group.expanded}"></i>\r\n      </button>\r\n      <input type="checkbox" class="filters-check" ng-model="group.selectExpand" ng-change="change(group)" ng-style="{color:group.color}">\r\n      <span title="{{group.definition}}">\r\n         {{group.name}} ({{(group.allCount | number) + (group.allCount || group.allCount == 0?\' of \':\'\')}}{{group.total | number}})\r\n      </span>\r\n      <div style="padding-left:10px" ng-show="group.expanded">\r\n         <div ng-repeat="category in group.categories | withTotals | orderBy: \'name\'"  ng-attr-title="{{category.definition}}">\r\n            <button class="undecorated" ng-click="category.expanded = !category.expanded" ng-style="{color:category.color}">\r\n               <i class="fa" ng-class="{\'fa-plus\':!category.expanded, \'fa-minus\':category.expanded}"></i>\r\n            </button>\r\n            <input class="filters-check" type="checkbox" ng-model="category.selectExpand" ng-change="change()" ng-style="{color:category.color}">\r\n            <span title="{{category.definition}}">\r\n               {{category.name}}\r\n               ({{(category.allCount | number) + (category.allCount || category.allCount == 0?\' of \':\'\')}}{{category.total}})\r\n            </span>\r\n            <div ng-show="category.expanded" style="padding-left:20px">\r\n               <div ng-repeat="feature in category.features | withTotals | orderBy: \'name\'"  ng-attr-title="{{feature.definition}}">\r\n                  <i class="fa fa-hand-o-right" aria-hidden="true" ng-style="{color:feature.color}"></i>\r\n                  <input class="filters-check" type="checkbox" ng-model="feature.selected" ng-change="change()" ng-style="{color:feature.color}">\r\n                  <span>\r\n                     {{feature.name}}\r\n                     ({{(feature.allCount | number) + (feature.allCount || feature.allCount == 0?\' of \':\'\')}}{{feature.total}})\r\n                  </span>\r\n               </div>\r\n            </div>\r\n         </div>\r\n      </div>\r\n   </div>\r\n</div>'),t.put("help/faqs.html",'<p style="text-align: left; margin: 10px; font-size: 14px;">\r\n   <strong>FAQS</strong>\r\n</p>\r\n\r\n<h5 ng-repeat="faq in faqs"><button type="button" class="undecorated" ng-click="focus(faq.key)">{{faq.question}}</button></h5>\r\n<hr/>\r\n<div class="row" ng-repeat="faq in faqs">\r\n   <div class="col-md-12">\r\n      <h5 tabindex="0" id="faqs_{{faq.key}}">{{faq.question}}</h5>\r\n      <span ng-bind-html="faq.answer"></span>\r\n      <hr/>\r\n   </div>\r\n</div>'),t.put("help/help.html",'<p style="text-align: left; margin: 10px; font-size: 14px;">\r\n\t<strong>Help</strong>\r\n</p>\r\n\r\n<div class="panel-body" ng-controller="HelpCtrl as help">\r\n\tThe steps to get data!\r\n\t<ol>\r\n\t\t<li>Define area of interest</li>\r\n\t\t<li>Select datasets</li>\r\n\t\t<li>Enter email address</li>\r\n\t\t<li>Start extract</li>\r\n\t</ol>\r\n\tAn email will be sent to you on completion of the data extract with a link to your data.\r\n   <hr>\r\n\t<finder-faqs faqs="help.faqs" ></finder-faqs>\r\n</div>'),t.put("navigation/altthemes.html",'<span class="altthemes-container">\r\n\t<span ng-repeat="item in themes | altthemesMatchCurrent : current">\r\n       <a title="{{item.label}}" ng-href="{{item.url}}" class="altthemesItemCompact" target="_blank">\r\n         <span class="altthemes-icon" ng-class="item.className"></span>\r\n       </a>\r\n    </li>\r\n</span>'),t.put("pill/pill.html",'<span class="btn btn-primary pn-pill" ng-style="item.color?{\'background-color\':item.color, \'padding-top\': \'3px\'}: {\'padding-top\': \'3px\'}">\r\n   <span style="max-width:100px;display:inline-block" title="{{label + item[name]}}" class="ellipsis">{{item[name]}}</span>\r\n   <span class="ellipsis" style="max-width:100px;display:inline-block">\r\n      ({{item.count?item.count:0 | number}})\r\n      <a ng-click="deselect()" href="javascript:void(0)" title="Remove from filters">\r\n         <i class="fa fa-close fa-xs" style="color: white"></i>\r\n      </a>\r\n   </span>\r\n</span>'),t.put("reset/reset.html",'<button type="button" class="map-tool-toggle-btn" ng-click="reset()" title="Reset page">\r\n   <span class="hidden-sm">Reset</span>\r\n   <i class="fa fa-lg fa-refresh"></i>\r\n</button>'),t.put("side-panel/trigger.html",'<button ng-click="toggle()" type="button" class="map-tool-toggle-btn">\r\n   <span class="hidden-sm">{{name}}</span>\r\n   <ng-transclude></ng-transclude>\r\n   <i class="fa fa-lg" ng-class="iconClass"></i>\r\n</button>')}]);